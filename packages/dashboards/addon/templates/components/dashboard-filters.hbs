{{!-- Copyright 2021, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
<div class="container-full m-b-4">
  <div class={{if this.isCollapsed "flex"}}>
    <span class="dashboard-filters__expand-button m-r-4" role="button" {{on "click" (toggle "isCollapsed" this)}}>
      <NaviIcon @icon="sliders" /> Filters<NaviIcon @icon="angle-down" class="dashboard-filters__toggle" />
    </span>

    <FilterCollection
      class="dashboard-filters-collection"
      @isCollapsed={{this.isCollapsed}}
      @onUpdateCollapsed={{fn (mut this.isCollapsed)}}
      @request={{this.request}}
      @onUpdateFilter={{@onUpdateFilter}}
      @onRemoveFilter={{@onRemoveFilter}}
      @onAddFilter={{@onAddFilter}}
    />

    {{#unless this.isCollapsed}}
      {{#if this.isAddingMode}}
        <div class="dashboard-filters--expanded-add-row flex m-y-4">
          <DenaliButton
            class="dashboard-filters--expanded-add-row__close"
            @style="text"
            @size="medium"
            @icon="minus-circle"
            @iconOnly={{true}}
            {{on "click" (toggle "isAddingMode" this)}}
          />
          <div class="row flex-1">
            <div class="col-1-5">
              <DashboardDimensionSelector
                class="p-x-4 dashboard-filters--expanded-add-row__dimension-selector"
                @dashboard={{@dashboard}}
                @onChange={{queue @onAddFilter (toggle "isAddingMode" this)}}
              />
            </div>
            <DenaliInput 
              @wrapperClass="col-1-5 p-x-4 dashboard-filters__operator-placeholder"
              @size="medium" 
              placeholder="Operator" 
              disabled={{true}}
            />
            <DenaliInput 
              @wrapperClass="col-3-5 p-x-4 dashboard-filters__values-placeholder" 
              @size="medium" 
              placeholder="Filter Values" 
              disabled={{true}}
            />
          </div>
        </div>
      {{else}}
        <DenaliButton 
          class="dashboard-filters--expanded__add-filter-button"
          @size="medium"
          @icon="filter-add"
          @style="text"
          {{on "click" (toggle "isAddingMode" this)}} 
        >
          Add Filter
        </DenaliButton>
      {{/if}}
    {{/unless}}
  </div>
</div>